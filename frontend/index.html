<!doctype html>
<html lang="fr">
        <head>

        <meta charset="utf-8">
        <title>Authentification hybride</title>
        <link rel="stylesheet" href="index.css">

        </head>

        <body>
                 <form id="signupForm" >
                        <h1>Inscrivez-vous : </h1>
                        <div>adresse email : </div>
                        <input name="email" type="email"/>
                        <div>pseudo : </div>
                        <input name="pseudo" />
                        <div>mot de passe : </div>
                        <input name="password" type="password"/>

                        <button type="submit">Connexion</button>

                </form>
                <a href="login.html">Se connecter</a>


                <script>
                    document.getElementById("signupForm").addEventListener("submit", async (e) => {
                      e.preventDefault();

                      const email = document.querySelector("[name=email]").value;
                      const password = document.querySelector("[name=password]").value;
                      const pseudo = document.querySelector("[name=pseudo]").value;

                      const resp = await fetch("http://localhost:3000/api/auth/signup", {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({ email, password, pseudo }),
                      });

                      if (resp.ok) {
                        const data = await resp.json();
                        console.log("Inscription r√©ussie :", data);
                        window.location.href = "login.html";
                      } else {
                        console.error("Erreur signup :", await resp.text());
                        alert("Erreur lors de l'inscription");
                      }
                    });
                </script>

        </body>
</html>

